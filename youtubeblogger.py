import streamlit as st
from typing_extensions import Text
from youtube_transcript_api import YouTubeTranscriptApi
from urllib.parse import urlparse, parse_qs
from groq import Groq

def get_transcript_text(video_url):
    parsed_url = urlparse(video_url)
    video_id = parse_qs(parsed_url.query).get("v", [None])[0]

    if video_id:
        transcript = YouTubeTranscriptApi.get_transcript(video_id)
        transcript_text = " ".join(line["text"] for line in transcript)
        return transcript_text
    else:
        return "Invalid YouTube video URL"

def generate_blog_post(transcript_text, api_key):
    client = Groq(api_key=api_key)
    completion = client.chat.completions.create(
        model="mixtral-8x7b-32768",
        messages=[
            {
                "role": "system",
                "content": "You write the transcript from the video into a blog post - capturing all of the different points and steps described based on the transcript. \n\n\nBe elaborative. Here's an example exchange: \n\n**The Power of Selective Attention: How to Focus on What Matters**\n\nHave you ever found yourself struggling to focus on multiple things at once, only to realize that your attention is limited? This bottleneck of attention is a natural constraint that affects us all. While it's a limitation, it also enables us to focus on what's truly important. But how do we filter out the noise and let the relevant information pass through?\n\n**The Magic of Selective Attention**\n\nSelective attention is the ability to tune in to specific stimuli while ignoring others. Think of a party or family gathering where everyone's chatting, and suddenly, someone calls your name. You immediately turn your head towards the sound. This is selective attention in action. Another example is the famous \"Where's Wally?\" book, where you have to tune your attention to find a specific person in a crowded scene.\n\n**The Flip Side of Selective Attention**\n\nHowever, there's a darker side to selective attention. When we focus on the negative, we can get caught up in a vicious cycle of negativity, dismissing the good things in our lives and concentrating only on failures and mishaps.\n\n**Warren Buffett's 525 Rule**\n\nSo, how do we focus on what's important? Take a cue from Warren Buffett, one of the most successful people in the world. He advises using the 525 rule: write down your top 25 professional priorities, pick the top 5, and dedicate your attention to those. Anything that doesn't make the cut becomes an \"avoid at all costs\" list.\n\n**Exercises to Develop Your Focus**\n\nTo develop your ability to focus on what's important, try these exercises:\n\n**Exercise 1: Counting Words**\n\nIn this exercise, you'll be training your active attention by focusing on counting words on a page. Here's how to do it:\n\n* Choose a book with a moderate font size and a decent amount of text on each page.\n* Sit comfortably with the book in a quiet spot where you won't be distracted.\n* Look at a page and start counting the words using only your eyes. Don't move your head or lips; just focus on the words.\n* Start with a single page and count the words. You can use a pointer finger to guide your eyes, but avoid using your fingers to count.\n* As you get more comfortable, gradually increase the number of pages you're counting words on. Try five pages, then 10, and eventually, an entire chapter.\n* The goal is to improve your active attention by training your brain to focus on a specific task.\n\n**Benefits:**\n\n* Improves active attention and concentration\n* Enhances reading comprehension by training your brain to focus on individual words\n* Develops your ability to process information quickly and accurately\n\n**Exercise 2: Morning Exercises**\n\nThis exercise is a combination of activities designed to stimulate your brain, improve focus, and increase productivity. Here's how to incorporate it into your morning routine:\n\n* **Eye Movements:** Start by moving your eyes right, left, up, and down for 30 seconds. This exercise helps increase blood flow to the brain, reduces eye strain, and prepares your brain for the day.\n* **Memory Recall:** Close your eyes and try to remember your diary or planner in detail. This includes abbreviations, strikethroughs, and any other details. This exercise improves your short-term and long-term memory.\n* **Simultaneous Drawing:** Hold a pen in each hand and simultaneously draw two different figures. This exercise forces both hemispheres of your brain to work together, improving communication and coordination between the two sides.\n\n**Benefits:**\n\n* Improves eye health and reduces eye strain\n* Enhances memory recall and retention\n* Develops interhemispheric communication and coordination\n* Increases productivity and focus\n\n**Exercise 3: Focusing on a Single Word**\n\nIn this exercise, you'll be training your attention endurance by focusing on a single word. Here's how to do it:\n\n* Choose a word that doesn't bore you, and sit comfortably in a quiet spot.\n* Close your eyes and repeat the word in your mind. Try to maintain focus on the word for 5 minutes straight.\n* If you find your mind wandering, gently bring your attention back to the word. Don't worry if you can't maintain focus for the entire 5 minutes initially; it will improve with practice.\n* As you get more comfortable, try increasing the duration to 10 minutes or more.\n\n**Benefits:**\n\n* Improves attention endurance and ability to focus\n* Develops mental discipline and self-control\n* Enhances ability to concentrate on a single task\n\n**Exercise 4: Observation**\n\nThis exercise is designed to improve your ability to focus on specific attributes of an object while ignoring other distractions. Here's how to do it:\n\n* Choose an object, such as a cup, fruit, or decoration. The object should be simple and familiar to you.\n* Hold the object and pay close attention to its attributes, including shape, color, texture, and size. Take your time to observe the object in detail.\n* Now, hold the object, but this time, try to ignore its attributes. Focus on the object as a whole, without thinking about its individual characteristics.\n* Close your eyes and imagine the object in detail. Rotate it in your head, examining it from multiple angles.\n\n**Benefits:**\n\n* Improves ability to focus on specific attributes of an object\n* Develops attention to detail and observation skills\n* Enhances ability to filter out distractions and focus on what's important\n\n**Exercise 5: Finding Circles**\n\nIn this exercise, you'll be training your brain to focus on specific patterns and objects in your environment. Here's how to do it:\n\n* Look around your room or workspace and find six objects that contain circles within them. This could be a logo on a bottle of soda, a piece of decoration, or the top of a cup.\n* Take your time to observe each object, paying attention to the circle or circular pattern.\n* As you get more comfortable, try to find more objects with circles in different environments.\n\n**Benefits:**\n\n* Improves ability to focus on specific patterns and objects\n* Develops attention to detail and observation skills\n* Enhances ability to find patterns and connections in your environment\n\n**Conclusion**\n\nThese exercises will help you develop your selective attention, enabling you to focus on what matters. Remember, what you pay attention to defines what your world looks like. Stay tuned for more tips on strengthening your concentration and focus in our next episode!"
            },
            {
                "role": "user",
                "content": "Here's the transcript: \nWe established that the capacity of our attention and by extension are focus is limited to put it simply this bottleneck looks something like this on the one hand this is a good thing because it gives us the actual ability to focus on the other hand though a question arises how do we filter out the input signals to let the important relevant information pass through the bottleneck to achieve that we have to tame our selective attention how selective attention Works think back to a time when you were at a party or a family gathering everybody's chatting around the table the music is playing everything is loud incomprehensible but suddenly in the chaos you hear somebody call your name and immediately turn your head towards the sound or maybe you noticed how people with kids always turn towards a child that shouts mom or dad these are just some examples of selective attention in a second you will feel its effects on yourself we're going to show you a video and your job is to count how many times players in white past the basketball ready go notice anything unusual maybe a gorilla of sorts this is a famous experiment designed by Daniel Simmons and Christopher Jarvis and according to its results half of the people watching never noticed the gorilla because they're too busy following the instructions another example that may be more familiar to you is the famous where's Wally book do you remember this challenge to find Wally amongst all the other characters you have to tune your selective attention to find a specific person in a strike white and red sweater there's a flip side to selective attention that can work against us it happens when we focus on the negative dismissing everything good in our lives and concentrating only on failures and mishaps falling into a vicious cycle let's get back to the question how do we focus on what's important we advise you to turn to advice from Warren Buffett one of the most successful people in the world and to try his famous 525 rule once while talking to his Pilot Mike Flint Warren prompted the man to write down his top 25 professional priorities once he did that Buffett told him to pick out of them the five he deemed the most important when the two lists were made it was obvious to Flint that he would have to dedicate most of his attention to the top five list but when he suggested that he should give other priorities some attention as well Buffett said no everything you didn't Circle just became your avoid at all costs list the moral of this story is quite clear everything that doesn't go through the bottleneck of your attention is to be avoided you can pick it up after you've achieved your top priorities but before that give it no thought your homework for this episode is going to be a couple of simple exercises to develop your ability to focus on what's important to do them effectively find a quiet spot where you can train uninterrupted the first exercise involves counting words pick up a book and count the number of words on any page using just your eyes then take it up a notch by gradually increasing the number of pages to five 10 or even a whole chapter this exercise is aimed at developing your active attention second morning exercises after waking up do the following routine start by moving your eyes right left up and down for 30 seconds then close your eyes and try to remember your diary or planner in the smallest detail including, abbreviations and strikethroughs after that grab a pen and both hands and try to simultaneously draw two different figures this will force both hemispheres of your brain to work at the same time positively affecting your attention third exercise focus on a single word choose any word as long as it doesn't bore you to death and try to repeat it in your mind for 5 minutes straight if you feel you can do it longer go for 10 minutes this will help train your attention endurance exercise 4 observation consists of Three Steps step one pick up a physical object it can be a cup a Fruit anything really pay close attention to all the attributes and characteristics of the object without letting anything distract you step 2 keep holding that object but this time don't let yourself think about its properties at all step three close your eyes and imagine the object with all its details rotate it in your head and examine it from multiple points of view and last one look around your room and find six objects that contain circles within them it could be anything a logo on a bottle of soda a piece of decoration the top of a cup Anything a logo on a bottle of soda a piece of decoration the top of a cup once you start looking for something you are almost certain to find it this exercise teaches you that what you pay attention to defines what your world is going to look like these exercises will help you develop your selective attention but regardless of any training sooner or later you're concentration and focus starts to decrease how can we strengthen them and make them last for as long as you need we'll talk about it in the next episode stay tuned and goodbye "
            },
            {
                "role": "assistant",
                "content": "**The Power of Selective Attention: How to Focus on What Matters**\n\nHave you ever found yourself struggling to focus on multiple things at once, only to realize that your attention is limited? This bottleneck of attention is a natural constraint that affects us all. While it's a limitation, it also enables us to focus on what's truly important. But how do we filter out the noise and let the relevant information pass through?\n\n**The Magic of Selective Attention**\n\nSelective attention is the ability to tune in to specific stimuli while ignoring others. Think of a party or family gathering where everyone's chatting, and suddenly, someone calls your name. You immediately turn your head towards the sound. This is selective attention in action. Another example is the famous \"Where's Wally?\" book, where you have to tune your attention to find a specific person in a crowded scene.\n\n**The Flip Side of Selective Attention**\n\nHowever, there's a darker side to selective attention. When we focus on the negative, we can get caught up in a vicious cycle of negativity, dismissing the good things in our lives and concentrating only on failures and mishaps.\n\n**Warren Buffett's 525 Rule**\n\nSo, how do we focus on what's important? Take a cue from Warren Buffett, one of the most successful people in the world. He advises using the 525 rule: write down your top 25 professional priorities, pick the top 5, and dedicate your attention to those. Anything that doesn't make the cut becomes an \"avoid at all costs\" list.\n\n**Exercises to Develop Your Focus**\n\nTo develop your ability to focus on what's important, try these exercises:\n\n**Exercise 1: Counting Words**\n\nIn this exercise, you'll be training your active attention by focusing on counting words on a page. Here's how to do it:\n\n* Choose a book with a moderate font size and a decent amount of text on each page.\n* Sit comfortably with the book in a quiet spot where you won't be distracted.\n* Look at a page and start counting the words using only your eyes. Don't move your head or lips; just focus on the words.\n* Start with a single page and count the words. You can use a pointer finger to guide your eyes, but avoid using your fingers to count.\n* As you get more comfortable, gradually increase the number of pages you're counting words on. Try five pages, then 10, and eventually, an entire chapter.\n* The goal is to improve your active attention by training your brain to focus on a specific task.\n\n**Benefits:**\n\n* Improves active attention and concentration\n* Enhances reading comprehension by training your brain to focus on individual words\n* Develops your ability to process information quickly and accurately\n\n**Exercise 2: Morning Exercises**\n\nThis exercise is a combination of activities designed to stimulate your brain, improve focus, and increase productivity. Here's how to incorporate it into your morning routine:\n\n* **Eye Movements:** Start by moving your eyes right, left, up, and down for 30 seconds. This exercise helps increase blood flow to the brain, reduces eye strain, and prepares your brain for the day.\n* **Memory Recall:** Close your eyes and try to remember your diary or planner in detail. This includes abbreviations, strikethroughs, and any other details. This exercise improves your short-term and long-term memory.\n* **Simultaneous Drawing:** Hold a pen in each hand and simultaneously draw two different figures. This exercise forces both hemispheres of your brain to work together, improving communication and coordination between the two sides.\n\n**Benefits:**\n\n* Improves eye health and reduces eye strain\n* Enhances memory recall and retention\n* Develops interhemispheric communication and coordination\n* Increases productivity and focus\n\n**Exercise 3: Focusing on a Single Word**\n\nIn this exercise, you'll be training your attention endurance by focusing on a single word. Here's how to do it:\n\n* Choose a word that doesn't bore you, and sit comfortably in a quiet spot.\n* Close your eyes and repeat the word in your mind. Try to maintain focus on the word for 5 minutes straight.\n* If you find your mind wandering, gently bring your attention back to the word. Don't worry if you can't maintain focus for the entire 5 minutes initially; it will improve with practice.\n* As you get more comfortable, try increasing the duration to 10 minutes or more.\n\n**Benefits:**\n\n* Improves attention endurance and ability to focus\n* Develops mental discipline and self-control\n* Enhances ability to concentrate on a single task\n\n**Exercise 4: Observation**\n\nThis exercise is designed to improve your ability to focus on specific attributes of an object while ignoring other distractions. Here's how to do it:\n\n* Choose an object, such as a cup, fruit, or decoration. The object should be simple and familiar to you.\n* Hold the object and pay close attention to its attributes, including shape, color, texture, and size. Take your time to observe the object in detail.\n* Now, hold the object, but this time, try to ignore its attributes. Focus on the object as a whole, without thinking about its individual characteristics.\n* Close your eyes and imagine the object in detail. Rotate it in your head, examining it from multiple angles.\n\n**Benefits:**\n\n* Improves ability to focus on specific attributes of an object\n* Develops attention to detail and observation skills\n* Enhances ability to filter out distractions and focus on what's important\n\n**Exercise 5: Finding Circles**\n\nIn this exercise, you'll be training your brain to focus on specific patterns and objects in your environment. Here's how to do it:\n\n* Look around your room or workspace and find six objects that contain circles within them. This could be a logo on a bottle of soda, a piece of decoration, or the top of a cup.\n* Take your time to observe each object, paying attention to the circle or circular pattern.\n* As you get more comfortable, try to find more objects with circles in different environments.\n\n**Benefits:**\n\n* Improves ability to focus on specific patterns and objects\n* Develops attention to detail and observation skills\n* Enhances ability to find patterns and connections in your environment\n\n**Conclusion**\n\nThese exercises will help you develop your selective attention, enabling you to focus on what matters. Remember, what you pay attention to defines what your world looks like. Stay tuned for more tips on strengthening your concentration and focus in our next episode!"
            },
            {
                "role": "user",
                "content": "Here's my new one: \n"
            },
            {
                "role": "assistant",
                "content": transcript_text
            }
            ],
        temperature=0.85,
        max_tokens=7350,
        top_p=1,
        stream=True,
        stop=None,
    )

    blog_post = ""
    for chunk in completion:
        blog_post += chunk.choices[0].delta.content or ""

    return blog_post

# Streamlit app
def main():
    st.title("YouTube Transcript to Blog Post")

    # Get Groq API key from user
    api_key = st.text_input("Enter your Groq API key:")

    # Get YouTube video URL from user
    video_url = st.text_input("Enter the URL of the YouTube video you want to create a blog post for:")

    if st.button("Generate Blog Post"):
        # Get transcript text
        transcript_text = get_transcript_text(video_url)

        if transcript_text != "Invalid YouTube video URL":
            # Generate blog post
            blog_post = generate_blog_post(transcript_text, api_key)

            # Display blog post in Markdown
            st.markdown(blog_post)

if __name__ == "__main__":
    main()
